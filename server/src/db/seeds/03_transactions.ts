import { Knex } from 'knex';

export async function seed(knex: Knex): Promise<void> {
  const now = new Date();
  const daysAgo = (days: number) => {
    const d = new Date(now);
    d.setDate(d.getDate() - days);
    return d;
  };

  await knex('transactions').insert([
    // Cayden's checking account transactions
    {
      account_id: 'acc-11111111-1111-1111-1111-111111111111',
      type: 'credit',
      category: 'deposit',
      amount: 3200.00,
      description: 'Direct Deposit - Acme Corp',
      spending_category: null,
      balance_after: 3200.00,
      created_at: daysAgo(30),
    },
    {
      account_id: 'acc-11111111-1111-1111-1111-111111111111',
      type: 'credit',
      category: 'deposit',
      amount: 3200.00,
      description: 'Direct Deposit - Acme Corp',
      spending_category: null,
      balance_after: 4850.00,
      created_at: daysAgo(16),
    },
    {
      account_id: 'acc-11111111-1111-1111-1111-111111111111',
      type: 'credit',
      category: 'deposit',
      amount: 3200.00,
      description: 'Direct Deposit - Acme Corp',
      spending_category: null,
      balance_after: 5750.00,
      created_at: daysAgo(2),
    },
    {
      account_id: 'acc-11111111-1111-1111-1111-111111111111',
      type: 'debit',
      category: 'purchase',
      amount: 45.99,
      description: 'Grocery Store',
      merchant_name: 'Whole Foods Market',
      spending_category: 'food',
      balance_after: 3154.01,
      created_at: daysAgo(28),
    },
    {
      account_id: 'acc-11111111-1111-1111-1111-111111111111',
      type: 'debit',
      category: 'purchase',
      amount: 12.50,
      description: 'Coffee Shop',
      merchant_name: 'Starbucks',
      spending_category: 'food',
      balance_after: 3141.51,
      created_at: daysAgo(27),
    },
    {
      account_id: 'acc-11111111-1111-1111-1111-111111111111',
      type: 'debit',
      category: 'purchase',
      amount: 89.99,
      description: 'Electric Bill',
      merchant_name: 'ConEdison',
      spending_category: 'bills',
      balance_after: 3051.52,
      created_at: daysAgo(25),
    },
    {
      account_id: 'acc-11111111-1111-1111-1111-111111111111',
      type: 'debit',
      category: 'purchase',
      amount: 35.00,
      description: 'Uber Ride',
      merchant_name: 'Uber',
      spending_category: 'transport',
      balance_after: 3016.52,
      created_at: daysAgo(22),
    },
    {
      account_id: 'acc-11111111-1111-1111-1111-111111111111',
      type: 'debit',
      category: 'purchase',
      amount: 150.00,
      description: 'Monthly Rent Portion',
      merchant_name: 'Landlord LLC',
      spending_category: 'bills',
      balance_after: 2866.52,
      created_at: daysAgo(20),
    },
    {
      account_id: 'acc-11111111-1111-1111-1111-111111111111',
      type: 'debit',
      category: 'purchase',
      amount: 67.43,
      description: 'Online Shopping',
      merchant_name: 'Amazon',
      spending_category: 'shopping',
      balance_after: 4782.57,
      created_at: daysAgo(14),
    },
    {
      account_id: 'acc-11111111-1111-1111-1111-111111111111',
      type: 'debit',
      category: 'purchase',
      amount: 25.00,
      description: 'Gym Membership',
      merchant_name: 'Planet Fitness',
      spending_category: 'health',
      balance_after: 4757.57,
      created_at: daysAgo(10),
    },
    {
      account_id: 'acc-11111111-1111-1111-1111-111111111111',
      type: 'debit',
      category: 'purchase',
      amount: 55.00,
      description: 'Movie Night',
      merchant_name: 'AMC Theaters',
      spending_category: 'entertainment',
      balance_after: 4702.57,
      created_at: daysAgo(7),
    },
    {
      account_id: 'acc-11111111-1111-1111-1111-111111111111',
      type: 'debit',
      category: 'purchase',
      amount: 128.50,
      description: 'Grocery Run',
      merchant_name: 'Trader Joes',
      spending_category: 'food',
      balance_after: 4574.07,
      created_at: daysAgo(5),
    },
    {
      account_id: 'acc-11111111-1111-1111-1111-111111111111',
      type: 'debit',
      category: 'purchase',
      amount: 200.00,
      description: 'Online Course',
      merchant_name: 'Udemy',
      spending_category: 'education',
      balance_after: 5550.00,
      created_at: daysAgo(1),
    },
    {
      account_id: 'acc-11111111-1111-1111-1111-111111111111',
      type: 'debit',
      category: 'transfer',
      amount: 500.00,
      description: 'Transfer to Savings',
      spending_category: null,
      balance_after: 2547.83,
      created_at: daysAgo(1),
    },
    // Savings account round-up
    {
      account_id: 'acc-22222222-2222-2222-2222-222222222222',
      type: 'credit',
      category: 'transfer',
      amount: 500.00,
      description: 'Transfer from Checking',
      spending_category: null,
      balance_after: 850.00,
      created_at: daysAgo(1),
    },
  ]);
}
